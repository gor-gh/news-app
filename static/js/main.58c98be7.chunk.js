(this["webpackJsonpnews-app-front"]=this["webpackJsonpnews-app-front"]||[]).push([[0],Array(22).concat([function(e,t,n){e.exports=n(50)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(19),s=n.n(o),c=n(3),l=(n(27),n(4)),i=n(5),u=n(7),m=n(6),d=(n(28),new(function(){function e(){Object(l.a)(this,e),this.localeStorageIsEnabled="undefined"!==typeof localStorage,this.localeStorageIsEnabled&&(this.token=localStorage.getItem("my_key_for_tokens"),this.token||(this.token=sessionStorage.getItem("my_key_for_tokens")))}return Object(i.a)(e,[{key:"isLoggedIn",value:function(){return!!this.token}},{key:"getNewses",value:function(e){return fetch("https://serene-hamlet-84320.herokuapp.com/api/news",{headers:{token:this.token}}).then(this.checkStatus).then((function(e){return e.json()})).then(e).catch((function(e){console.log(e)}))}},{key:"login",value:function(e,t){var n=this,a=JSON.stringify(e);return fetch("https://serene-hamlet-84320.herokuapp.com/users/login",{method:"POST",body:a,headers:{"Content-Type":"application/json"}}).then(this.checkStatus).then((function(e){return e.json()})).then((function(e){return n.setToken(e.token,t)}))}},{key:"logout",value:function(){var e=this;return fetch("https://serene-hamlet-84320.herokuapp.com/users/logout",{headers:{token:this.token}}).then(this.checkStatus).then((function(e){return e.json()})).catch((function(e){console.log(e)})).then((function(){e.removeToken()}))}},{key:"setToken",value:function(e,t){this.token=e,this.localeStorageIsEnabled&&(t?localStorage.setItem("my_key_for_tokens",this.token):sessionStorage.setItem("my_key_for_tokens",this.token))}},{key:"removeToken",value:function(){this.token=null,this.localeStorageIsEnabled&&(localStorage.removeItem("my_key_for_tokens"),sessionStorage.removeItem("my_key_for_tokens"))}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error ".concat(e.statusText));throw t.status=e.statusText,t.response=e,t}}]),e}())),h=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},p=function(e,t){var n=new RegExp(t,"i");return!!~e.search(n)},g=function(e){var t=new Date(e),n=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getHours()<10?"0"+t.getHours():t.getHours(),o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),c="".concat(r,":").concat(o,":").concat(s);return"".concat(n,"-").concat(a,"-").concat(t.getFullYear(),"    ").concat(c)},f=(n(29),n(30),n(31),function(e){return r.a.createElement("div",{className:"list_cont d-flex ".concat("row"===e.direction?"flex-direction-row":"flex-direction-column")},e.categories.map((function(e,t){return r.a.createElement(c.c,{to:"/categories/".concat(e),className:"px-4 btn btn-hover",key:t},h(e))})))}),v=(n(37),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchValue:"",_inputIsMaximized:!1},e.handleInputChange=function(t){e.setState({searchValue:t.target.value},(function(){e.props.onSearch(e.state.searchValue)}))},e.expandInput=function(){e.setState({_inputIsMaximized:!0})},e.minimizeInput=function(){e.state.searchValue||e.setState({_inputIsMaximized:!1})},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"search_cont d-flex flex-direction-column w-25"},r.a.createElement("div",null,r.a.createElement("input",{onClick:this.expandInput,onBlur:this.minimizeInput,className:"search_input ".concat(this.state._inputIsMaximized?"w-100":"w-50"),style:{width:this.state._inputWidth},type:"search",placeholder:this.props.placeholder,onChange:this.handleInputChange,value:this.state.searchValue})),r.a.createElement("div",{className:"".concat(this.state.searchValue?"d-block":"d-none"," search_result"),style:{display:this.state.searchValue?"block":"none"}},this.props.searchResults.length?this.props.searchResults.map((function(e,t){return r.a.createElement("div",{className:"p-2 d-flex align-items-center",key:t},r.a.createElement(c.b,{className:"d-flex align-items-center",to:"/articles/".concat(e._id)},r.a.createElement("img",{src:e.imgUrl,className:"search_img float-left",alt:""}),r.a.createElement("span",{className:"pl-1"},e.title.slice(0,100))))})):r.a.createElement("div",{className:"pt-2 pb-2"},"No Result")))}}]),n}(r.a.Component)),E=(n(38),n(39),n(40),n(41),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:e.props.value,error:!1},e.onChange=function(t){var n=e.props.name,a=t.target.value,r=!!e.props.validate&&e.props.validate(a);e.setState({value:a,error:r}),e.props.onChange({name:n,value:a,error:r})},e}return Object(i.a)(n,[{key:"render",value:function(){return"message"!==this.props.name?r.a.createElement("div",{className:"d-flex pt-2 pb-2 align-items-center justify-content-center flex-direction-column"},r.a.createElement("input",{type:this.props.type,className:"form_inp",placeholder:this.props.placeholder,onChange:this.onChange}),r.a.createElement("span",{className:"err_msg pl-2 pt-2"},this.state.error)):r.a.createElement("div",{className:"d-flex pt-2 pb-2 align-items-center justify-content-center flex-direction-column"},r.a.createElement("textarea",{placeholder:this.props.placeholder,className:"d-block",onChange:this.onChange,cols:"30",rows:"10"}),r.a.createElement("span",{className:"err_msg pl-2 pt-2"},this.state.error))}}]),n}(r.a.Component)),b=(n(42),function(e){return r.a.createElement("div",{className:"lds-ripple ".concat(e.velocity)},r.a.createElement("div",null),r.a.createElement("div",null))}),_=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_isLoading:!1,fields:{name:"",email:"",message:""},fieldErrors:{}},e.onFormSubmit=function(t){t.preventDefault();var n=Math.floor(1001*Math.random())+1e3;e.setState({_isLoading:!0},(function(){setTimeout((function(){e.setState({_isLoading:!1},(function(){e.props.closeModal()}))}),n)}))},e.onInputChange=function(t){var n=t.name,a=t.value,r=t.error,o=Object.assign({},e.state.fields),s=Object.assign({},e.state.fieldErrors);o[n]=a,s[n]=r,e.setState({fields:o,fieldErrors:s})},e.validate=function(){var t=e.state.fields,n=e.state.fieldErrors,a=Object.keys(n).filter((function(e){return n[e]}));return!t.name||!t.email||!t.message||a.length},e}return Object(i.a)(n,[{key:"render",value:function(){return this.state._isLoading?r.a.createElement(b,{velocity:"normal"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement(E,{name:"name",type:"text",onChange:this.onInputChange,placeholder:"Type your name...",validate:function(e){return!e&&"Name is required"}}),r.a.createElement(E,{name:"email",type:"text",onChange:this.onInputChange,placeholder:"Type your email...",validate:function(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)&&"Email is invalid"}}),r.a.createElement(E,{name:"message",type:"textarea",onChange:this.onInputChange,placeholder:"Write a message...",validate:function(e){return!e&&"Message is required"}}),r.a.createElement("input",{type:"submit",value:"Send",className:"btn mx-auto submit_btn",disabled:this.validate()||this.state._isLoading})))}}]),n}(r.a.Component),y=function(e){var t=!1;return r.a.createElement("div",{onClick:function(){t||e.onClose()},className:"modal_background  ".concat(e.isOpen?"showModal":"hideModal")},r.a.createElement("div",{onMouseOver:function(){return t=!0},onMouseOut:function(){return t=!1},className:"modal_window w-50 mx-auto pb-1"},r.a.createElement("div",{className:"modal_header d-flex justify-content-center pt-3"},r.a.createElement("h1",{className:"mt-1"},"Contact with us"),r.a.createElement("button",{className:"btn close_button ",onClick:e.onClose},"\xd7")),r.a.createElement("div",{className:"modal_body pt-3"},r.a.createElement(_,{closeModal:e.onClose})),r.a.createElement("div",{className:"modal_footer"},r.a.createElement("h6",null,"Picsart \xa9"))))},w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_modalOpen:!1},e.openModal=function(){e.setState({_modalOpen:!0})},e.closeModal=function(){e.setState({_modalOpen:!1})},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"contact_cont"},r.a.createElement("button",{onClick:this.openModal,className:"btn btn-white"},"CONTACT US"),r.a.createElement(y,{onClose:this.closeModal,isOpen:this.state._modalOpen}))}}]),n}(r.a.Component),N=function(e){return r.a.createElement("div",{className:"vertical_menu d-flex justify-content-around align-items-center flex-direction-column ".concat(e.show?"showMenu":"")},r.a.createElement("i",{onClick:e.closeModal,className:"fa fa-angle-double-right close_arrow"}),r.a.createElement(f,{direction:"column",categories:["covid-19","political","sport","art"],closeMenu:e.closeModal}),r.a.createElement(v,{placeholder:"Search...",onSearch:e.onSearch,searchResults:e.searchResults}),r.a.createElement(w,null),r.a.createElement("div",{className:""},e.isLoggedIn?r.a.createElement(c.b,{onClick:e.loggedOut,className:"btn logout_button",to:"/logout"},"Logout"):r.a.createElement(c.b,{className:"btn logout_button",to:"/login"},"Login")))},k=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_showVerticalMenu:!1},e.showVertical=function(){e.setState((function(e){return{_showVerticalMenu:!e._showVerticalMenu}}))},e.loggedOut=function(){e.props.logoutCallback(),e.setState((function(e){return{_showVerticalMenu:!e._showVerticalMenu}}))},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("header",{className:"pt-4 pb-4 px-4 d-flex justify-content-between align-items-center"},r.a.createElement("div",null,r.a.createElement("h1",{className:"m-0 text-left home_link"},r.a.createElement(c.b,{to:"/"},"News App"))),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center for_big_view"},r.a.createElement(f,{direction:"row",categories:["covid-19","political","sport","art"]}),r.a.createElement(v,{placeholder:"Search for articles...",onSearch:this.props.onSearch,searchResults:this.props.searchResults}),r.a.createElement(w,null),r.a.createElement("div",{className:""},this.props.isLoggedIn?r.a.createElement(c.b,{onClick:this.loggedOut,className:"btn logout_button",to:"/logout"},"Logout"):r.a.createElement(c.b,{className:"btn logout_button",to:"/login"},"Login"))),r.a.createElement("div",{className:"for_media_view"},r.a.createElement("div",{onClick:this.showVertical},r.a.createElement("i",{className:"fa fa-bars menu_icon"})),r.a.createElement(N,{show:this.state._showVerticalMenu,isLoggedIn:this.props.isLoggedIn,onSearch:this.props.onSearch,searchResults:this.props.searchResults,loggedOut:this.loggedOut,closeModal:this.showVertical})))}}]),n}(r.a.Component),S=(n(43),n(44),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={fields:{username:"",password:""},rememberMe:!1,fieldErrors:{}},e.onFormSubmit=function(t){t.preventDefault();var n=e.state.fields;e.validate()||(e.props.login(n,e.state.rememberMe),e.setState())},e.onInputChange=function(t){var n=t.name,a=t.value,r=t.error,o=Object.assign({},e.state.fields),s=Object.assign({},e.state.fieldErrors);o[n]=a,s[n]=r,e.setState({fields:o,fieldErrors:s})},e.toggleRememberMe=function(t){e.setState((function(e){return{rememberMe:!e.rememberMe}}))},e.validate=function(){var t=e.state.fields,n=e.state.fieldErrors,a=Object.keys(n).filter((function(e){return n[e]}));return!t.username||!t.password||a.length},e}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"login_form_cont ".concat(this.props.longInputs?"longInputs":"")},r.a.createElement("h2",{className:"pb-3 login_header"},"Login to get access"),r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement(E,{name:"username",type:"text",value:this.state.fields.username,onChange:this.onInputChange,placeholder:"Username",validate:function(e){return!e&&"Username is required"}}),r.a.createElement(E,{name:"password",onChange:this.onInputChange,value:this.state.fields.password,type:"password",placeholder:"Password",validate:function(e){return!e&&"Password is required"}}),r.a.createElement("div",{className:"d-flex justify-content-center pb-2"},r.a.createElement("input",{type:"checkbox",name:"rememberMe",className:"d-flex",value:this.state.rememberMe,onChange:this.toggleRememberMe}),r.a.createElement("span",null,"Remember me")),this.props.loginFailed?r.a.createElement("div",{className:"d-flex justify-content-center pb-2",style:{color:"red"}},"Failed to login. Please try again"):null,r.a.createElement("input",{type:"submit",value:"Login",className:"login_btn",disabled:this.validate()})))}}]),n}(r.a.Component)),O=n(2),j=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_loginInProcess:!1,_loginFailed:!1,_shouldRedirect:!1},e.login=function(t,n){var a=t.username,r=t.password;e.setState({_loginInProcess:!0},(function(){d.login({username:a,password:r},n).then((function(){e.props.loggedInCallback(),e.setState({_loginInProcess:!1,_shouldRedirect:!0})})).catch((function(t){console.log(t.response),e.setState({_loginInProcess:!1,_loginFailed:!0})}))}))},e.redirectPath=function(){if(!e.props.location)return"/login";var t=e.props.location.state;return t&&t.from&&t.from.pathname||"/"},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){d.isLoggedIn()&&this.setState({_shouldRedirect:!0})}},{key:"render",value:function(){return this.state._shouldRedirect?r.a.createElement(O.a,{to:this.redirectPath()}):this.state._loginInProcess?r.a.createElement("div",{className:"mx-auto d-flex align-items-center justify-content-center login_form_container"},r.a.createElement(b,{velocity:"slow"})):r.a.createElement("div",{className:"mx-auto login_form_container"},r.a.createElement(S,{longInputs:!0,login:this.login,loginFailed:this.state._loginFailed}))}}]),n}(r.a.Component),I=function(e){return d.logout(),r.a.createElement(O.a,{to:"/login"})},x=(n(45),n(46),function(e){return r.a.createElement("div",{className:"news_item p-2 d-flex"},r.a.createElement("img",{src:e.imgUrl,className:"news_img",alt:""}),r.a.createElement("div",{className:"content_cont"},r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(c.b,{className:"news_link",to:"/categories/".concat(e.category)},r.a.createElement("span",{className:"news_category"},e.category))),r.a.createElement(c.b,{title:e.description?e.description:"No description",className:"news_link",to:"/articles/".concat(e.id)},r.a.createElement("h5",{className:"text-left pl-2 news_title"},e.title),r.a.createElement("p",{className:"px-3 text-left news_content"},e.content.slice(0,500)+"...")),r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("span",{className:"news_author"},e.author?e.author:"No author mentioned"),r.a.createElement("span",{className:"news_date"},g(e.createdAt)))))}),C=(n(47),function(e){var t;return r.a.createElement("div",{className:"latest_container mx-auto w-50"},r.a.createElement("h2",{className:"text-center latest_heading"},"Latest News"),(t=e.newses,function(e){return e.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}))}(t).filter((function(e,t){return t<10}))).map((function(e,t){return r.a.createElement(x,{key:e._id,id:e._id,title:e.title,imgUrl:e.imgUrl,content:e.content,category:e.category,description:e.description,source:e.sourceUrl,author:e.author,createdAt:e.createdAt})})))}),M=function(e){return r.a.createElement("div",{className:"home_container pb-4"},r.a.createElement(C,{newses:e.newses}))},A=(n(48),function(e){return r.a.createElement("div",{className:"category_page_cont w-50 pb-4 mx-auto"},e.newses.map((function(e){return r.a.createElement(x,{key:e._id,id:e._id,title:e.title,content:e.content,imgUrl:e.imgUrl,category:e.category,author:e.author,source:e.sourceUrl,description:e.description,createdAt:e.createdAt})})))}),L=(n(49),function(e){return r.a.createElement("article",{className:"pt-4 pb-4 w-75 mx-auto"},r.a.createElement("h1",{className:"article_heading"},e.title),r.a.createElement("div",{className:"article_content w-100 "},r.a.createElement("img",{src:e.imgUrl,alt:"Not found",className:"float-left mr-4 article_img"}),function(e){for(var t=e.includes(":")?":":"\u0589",n=e.split(t),a=[],r=0;r<n.length;r+=2)n[r+1]&&a.push(n[r]+t+" "+n[r+1]+t);return n.length%2===1&&a.push(n[n.length-1]),console.log(n.length),a}(e.content).map((function(e,t){return r.a.createElement("p",{className:"pt-3",key:t},e)}))),r.a.createElement("div",{className:"info_about_article d-flex justify-content-around mt-3"},e.author?r.a.createElement("span",null,"Author: ",e.author):r.a.createElement("span",null,"No author mentioned"),e.source?r.a.createElement("span",null,r.a.createElement("a",{href:e.source,target:"_blank"},"Source here...")):r.a.createElement("span",null,"No source URL"),r.a.createElement("span",null,"Created At: ",g(e.createdAt))))}),R=n(21),T=function(e){var t=e.component,n=Object(R.a)(e,["component"]);return r.a.createElement(O.b,Object.assign({},n,{render:function(e){return d.isLoggedIn()?r.a.createElement(t,e):r.a.createElement(O.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_loggedIn:!1,searchResults:[],newses:[]},e.loggedIn=function(){e.setState({_loggedIn:!0},(function(){d.isLoggedIn()&&d.getNewses((function(t){e.setState({newses:t})}))}))},e.loggedOut=function(){e.setState({_loggedIn:!1,newses:[],searchResults:[]})},e.performSearch=function(t){var n=e.state.newses.filter((function(e){return p(e.title,t)}));e.setState({searchResults:n})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;d.isLoggedIn()&&(this.setState({_loggedIn:!0}),d.getNewses((function(t){e.setState({newses:t})})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App pb-4"},r.a.createElement(k,{onSearch:this.performSearch,searchResults:this.state.searchResults,logoutCallback:this.loggedOut,isLoggedIn:this.state._loggedIn}),r.a.createElement(O.d,null,r.a.createElement(O.b,{path:"/logout",component:I}),r.a.createElement(T,{path:"/articles/:articleId",component:function(t){var n=t.match,a=e.state.newses.find((function(e){return e._id===n.params.articleId}));return a?r.a.createElement(L,{id:a._id,title:a.title,content:a.content,imgUrl:a.imgUrl,category:a.category,createdAt:a.createdAt,author:a.author,source:a.sourceUrl,description:a.description}):null}}),r.a.createElement(T,{path:"/categories/:categName",component:function(t){var n=t.match,a=e.state.newses.filter((function(e){return e.category===n.params.categName}));return a.length?r.a.createElement(A,{newses:a,category:n.params.categName}):r.a.createElement("div",{className:"text-center no_content"},"There is no article in \xab",h(n.params.categName),"\xbb Category.")}}),r.a.createElement(O.b,{path:"/login",render:function(t){return r.a.createElement(j,Object.assign({},t,{loggedInCallback:e.loggedIn}))}}),r.a.createElement(T,{exact:!0,path:"/",component:function(){return r.a.createElement(M,{newses:e.state.newses})}}),r.a.createElement(O.b,{render:function(){return r.a.createElement(O.a,{to:"/"})}})))}}]),n}(r.a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{basename:"/news-app"},r.a.createElement(U,null))),document.getElementById("root"))}]),[[22,1,2]]]);
//# sourceMappingURL=main.58c98be7.chunk.js.map